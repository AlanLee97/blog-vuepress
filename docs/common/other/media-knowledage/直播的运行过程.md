# 直播的运行过程

## 主流程

![img](https://cdn.nlark.com/yuque/0/2021/jpeg/743297/1627349974007-3d6b376a-8264-4337-a6d4-1dfa71cabe42.jpeg)

### 1.采集

采集画面

### 2.编码

视频编码



**编码格式**

- h.264
- h.265

- vp8
- vp9

![img](https://cdn.nlark.com/yuque/0/2021/png/743297/1627350187492-1892605e-0d7b-470c-8e96-9fc1e3fe8f8e.png)



**封装格式**

- mp4
- avi

- mkv

![img](https://cdn.nlark.com/yuque/0/2021/png/743297/1627350933765-8876262c-a4c4-43a8-a9cd-febf89f2ebb0.png)





### 3.上传

上传视频，主播端上传视频到服务器

### 4.下载

下载视频，观看端从服务器中下载视频

### 5.播放

播放视频，观看端将下载好的主播端的视频进行解码，解码成播放器可识别的格式，使用播放视频。





## 直播的相关参数



### 1.码率/比特率（byterate）

定义：数据传输时单位事件传送的数据量，单位kbps



摄像机采集的画面需要经过压缩之后再进行网络传输，压缩的比率越小，视频越清晰，视频码率越高。码率越高要求的设备配置也越高，一般设置码率为800~1500

### 2.帧率（FPS）

定义：每秒中切换画面的次数，视频帧率越高，视频看起来越流畅。

### 3.丢包率

定义：用户数据传输过程中是以包（packet）的传输的，一个数据包包含一组数据，而在传输过程 中，被异常丢弃的数据包占所有发送的数据包的比率，就是丢包率

### 4.分辨率

定义：图像内像素点的数量。例如1920*1080分辨率的图片，约有200万像素点。

### 5.上传速度

主要与视频的码率大小和网络速度相关，码率越大，视频文件越大，上传时间越久。

### 6.下载速度

主要与视频的码率大小和网络速度、宽带带宽大小相关，码率越大，网络带宽小，视频文件越大，下载时间越久。



## 解决直播卡顿

1.连接更好的网络

2.降低视频清晰度