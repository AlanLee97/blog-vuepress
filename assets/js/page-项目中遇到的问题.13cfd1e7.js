(window.webpackJsonp=window.webpackJsonp||[]).push([[305],{1050:function(t,s,a){"use strict";a.r(s);var n=a(1),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"项目中遇到的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目中遇到的问题"}},[t._v("#")]),t._v(" 项目中遇到的问题")]),t._v(" "),a("h2",{attrs:{id:"问题1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题1"}},[t._v("#")]),t._v(" 问题1")]),t._v(" "),a("h5",{attrs:{id:"问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),a("p",[t._v("多图片上传的问题，通过element-ui的el-upload组件上传多图片时，总是上传到最后一张图片")]),t._v(" "),a("h5",{attrs:{id:"原因"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原因"}},[t._v("#")]),t._v(" 原因")]),t._v(" "),a("p",[t._v("按照普通的图片上传，如果多张图片上传一般是循环单次上传的接口，或者后端使用Multipart数组的方式，但是，经debug过程发现，在使用Element-ui的el-upload组件上传时，循环调用单文件上传接口时，会出现前一次的函数还没执行完，下一次循环又开始调用该接口了，导致文件上传的是最后一个文件。")]),t._v(" "),a("h5",{attrs:{id:"解决"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决"}},[t._v("#")]),t._v(" 解决")]),t._v(" "),a("p",[t._v("先获取el-upload组件获取的文件列表，保存到data中，然后使用递归调用上传图片的函数，只有当上一次上传成功时再次调用本函数，形成递归调用，实现多图片上传。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//发起上传的请求")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("uploadRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("formDataList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" index")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IMAGE_UPLOAD_RETURN_ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// url: this.localUploadUrl,")]),t._v("\n       method"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'post'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" formDataList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       headers"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"content-type"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"multipart/form-data"')]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('";"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sendData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("imgIds "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('";"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//递归上传下一张图片")]),t._v("\n       index"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" formDataList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index: "')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("uploadRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("formDataList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//上传完最后一张之后的操作")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" formDataList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("success")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"上传完成"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//图片上传完成，开始发布作品")]),t._v("\n           "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("startRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br")])]),a("h2",{attrs:{id:"问题2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题2"}},[t._v("#")]),t._v(" 问题2")]),t._v(" "),a("h5",{attrs:{id:"问题-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题-2"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),a("p",[t._v("使用el-image组件显示图片时，一点击图片，网页就不能动")]),t._v(" "),a("h5",{attrs:{id:"原因-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原因-2"}},[t._v("#")]),t._v(" 原因")]),t._v(" "),a("p",[t._v("点击图片时，el-image组件会在body标签里添加一个overflow:hiden的属性，倒置网页卡住不动")]),t._v(" "),a("h5",{attrs:{id:"解决-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决-2"}},[t._v("#")]),t._v(" 解决")]),t._v(" "),a("p",[t._v("参考el-image组件源码，自己写了个简单的图片组件")]),t._v(" "),a("h2",{attrs:{id:"问题3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题3"}},[t._v("#")]),t._v(" 问题3")]),t._v(" "),a("h5",{attrs:{id:"问题-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题-3"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),a("p",[t._v("跨域问题CORS")]),t._v(" "),a("h5",{attrs:{id:"原因-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原因-3"}},[t._v("#")]),t._v(" 原因")]),t._v(" "),a("p",[t._v("浏览器本身的限制")]),t._v(" "),a("h5",{attrs:{id:"解决-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决-3"}},[t._v("#")]),t._v(" 解决")]),t._v(" "),a("p",[t._v("在后端配置CORS即可")]),t._v(" "),a("h2",{attrs:{id:"问题4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题4"}},[t._v("#")]),t._v(" 问题4")]),t._v(" "),a("h5",{attrs:{id:"问题-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题-4"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),a("p",[t._v("Vue 路由跳转相同路径页面不刷新，例如/user/1，想要在本页面通过路由跳转到/user/2的页面，遇到页面没有跳转，只有地址栏的路径有变化的问题")]),t._v(" "),a("h5",{attrs:{id:"原因-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原因-4"}},[t._v("#")]),t._v(" 原因")]),t._v(" "),a("p",[t._v("使用"),a("code",[t._v("router-view")]),t._v("时，如果在相同路由之间跳转，默认在跳转路由时会采用"),a("code",[t._v("缓存策略")]),t._v(",并不会刷新当前路由组件。\n所以生命周期钩子函数并不会触发。")]),t._v(" "),a("h5",{attrs:{id:"解决-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决-4"}},[t._v("#")]),t._v(" 解决")]),t._v(" "),a("p",[t._v("在router-view组件上添加"),a("code",[t._v(':key="$route.fullPath"')]),t._v("属性")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("router"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("view "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"$route.fullPath"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("使用这个可以完美解决不刷新问题。")]),t._v(" "),a("p",[t._v("强制刷新，可以在根路由上为其分配一个唯一key。采用"),a("code",[t._v("$route.fullpath")]),t._v("作为其唯一key。这样vue就回认为内部路由每个都是不同的路由，在跳转时便会强制刷新组件")]),t._v(" "),a("h2",{attrs:{id:"问题5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题5"}},[t._v("#")]),t._v(" 问题5")]),t._v(" "),a("h5",{attrs:{id:"问题-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题-5"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),a("p",[t._v("微服务之间在线上部署docker时相互调用")]),t._v(" "),a("h5",{attrs:{id:"原因-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原因-5"}},[t._v("#")]),t._v(" 原因")]),t._v(" "),a("p",[t._v("docker容器本身有隔离机制，如果不做配置的话，两个容器之间是不能通过内网通信的。")]),t._v(" "),a("h5",{attrs:{id:"解决-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决-5"}},[t._v("#")]),t._v(" 解决")]),t._v(" "),a("p",[t._v("docker应用也需要创建docker的network，然后在运行每一容器时加入同一个网络或者在docker-compose.yml文件中指定特定的网络，这样每个服务之间才能通信。")]),t._v(" "),a("h2",{attrs:{id:"问题6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题6"}},[t._v("#")]),t._v(" 问题6")]),t._v(" "),a("h5",{attrs:{id:"问题-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题-6"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),a("p",[t._v("项目依赖冲突")]),t._v(" "),a("h5",{attrs:{id:"原因-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原因-6"}},[t._v("#")]),t._v(" 原因")]),t._v(" "),a("p",[t._v("在Spring Boot项目中，maven仓库中有很多starter依赖，当我们在项目中导入相关依赖时，很多时候会直接引入某些starter依赖，然而很多starter依赖包含了许多相同的jar包，导致启动项目时，包依赖冲突，")]),t._v(" "),a("h5",{attrs:{id:"解决-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决-6"}},[t._v("#")]),t._v(" 解决")]),t._v(" "),a("p",[t._v("所以需要仔细查看各个依赖，减少引入相同包，在pom.xml文件中可以用exclude排除冲突的包。")]),t._v(" "),a("h2",{attrs:{id:"问题7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题7"}},[t._v("#")]),t._v(" 问题7")]),t._v(" "),a("h5",{attrs:{id:"问题-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题-7"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),a("p",[t._v("阿里云云效平台的流水线中Maven项目打包找不到符号")]),t._v(" "),a("h5",{attrs:{id:"原因-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原因-7"}},[t._v("#")]),t._v(" 原因")]),t._v(" "),a("p",[t._v("出现这个问题是因为阿里云云效平台的maven打包时没有找到我们项目私服的jar包，")]),t._v(" "),a("h5",{attrs:{id:"解决-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决-7"}},[t._v("#")]),t._v(" 解决")]),t._v(" "),a("p",[t._v("配置maven的setting.xml文件之后就可以找到相关依赖的jar包了。")]),t._v(" "),a("p",[t._v("另一种解决方案是，直接手动打jar包上传到代码仓库，让流水线只负责生成镜像容器并部署就可以了。")]),t._v(" "),a("h2",{attrs:{id:"问题8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题8"}},[t._v("#")]),t._v(" 问题8")]),t._v(" "),a("h5",{attrs:{id:"问题-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题-8"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),a("p",[t._v("docker容器中的java应用占的内存太高了，不优化的情况下，一个应用不做限制的话，会占用400M到500M的内存，而且随着服务器的本身内存越大，java应用占用的内存也越大。")]),t._v(" "),a("h5",{attrs:{id:"解决-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决-8"}},[t._v("#")]),t._v(" 解决")]),t._v(" "),a("p",[t._v("在启动java应用时，设置堆内存，指定堆内存的大小即可，如-Xmx128m和-Xms128m。")]),t._v(" "),a("h2",{attrs:{id:"问题9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题9"}},[t._v("#")]),t._v(" 问题9")]),t._v(" "),a("h5",{attrs:{id:"问题-9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题-9"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),a("p",[t._v("应用docker容器中时区问题")]),t._v(" "),a("h5",{attrs:{id:"原因-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原因-8"}},[t._v("#")]),t._v(" 原因")]),t._v(" "),a("p",[t._v("docker容器中默认的时区与中国的时区相差8个小时")]),t._v(" "),a("h5",{attrs:{id:"解决-9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决-9"}},[t._v("#")]),t._v(" 解决")]),t._v(" "),a("p",[t._v("设置docker容器的时区，在Dockerfile中添加以下代码即可")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[t._v("RUN "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" -snf /usr/share/zoneinfo/"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$TZ")]),t._v(" /etc/localtime "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$TZ")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /etc/timezone\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);